<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="../static/assets/css/Animated-Radial-Menu.css">
    <script defer type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script defer nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
    <script defer src="../static/assets/js/Animated-Radial-Menu.js"></script>
    <title>Formulario</title>
</head>

<body>
    <div class="cuerpo">
        <form id="dynamicForm" action="#" method="POST">

            <input type="hidden" id="clave" name="clave" value="{{datos.clave}}">

            <label for="nombre">Nombre:</label><br>
            <input type="text" id="nombre" name="nombre" value="{{datos.nombre}}"><br>

            <label for="descripcion">Descripci√≥n:</label><br>
            <textarea id="descripcion" name="descripcion">{{datos.descripcion}}</textarea><br>

            <label for="ataque">Ataque:</label><br>
            <input type="text" id="ataque" name="ataque" value="{{datos.ataque}}"><br>

            <label for="ataquePor">Ataque%:</label><br>
            <input type="text" id="ataquePor" name="ataquePor" value="{{datos.ataquePor}}"><br>

            <label for="magia">Magia:</label><br>
            <input type="text" id="magia" name="magia" value="{{datos.magia}}"><br>

            <label for="coste">Coste:</label><br>
            <input type="text" id="coste" name="coste" value="{{datos.coste}}"><br>

            <label for="materia">Slots de Materias:</label>
            <select id="materia" onchange="createInputs()">
             <option value="{{datos.materia}}">-- Select --</option>
             <option value="1">1</option>
             <option value="2">2</option>
             <option value="3">3</option>
             <option value="4">4</option>
             <option value="5">5</option>
            </select><br>

            <input id="env" type="submit" value="Enviar">
        </form>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById("{{datos.tipo}}").checked = true;
        });
    </script>
    <script>
        function createInputs() {
            var numberOfInputs = parseInt(document.getElementById("materia").value);
            var form = document.getElementById("dynamicForm");


            boton = document.getElementById("env")
            form.removeChild(boton);
            // Clear existing inputs
            for (var i = 0; i < 5; i++) {
                espacio = document.getElementById("spc" + (i + 1));
                label = document.getElementById("label" + (i + 1));
                input = document.getElementById("slot" + (i + 1));

                if (form.contains(espacio)) {
                    form.removeChild(espacio);
                }

                if (form.contains(input)) {
                    form.removeChild(input);

                }

                if (form.contains(label)) {
                    form.removeChild(label);
                }
            }

            // Create new inputs
            for (var i = 0; i < numberOfInputs; i++) {
                var label = document.createElement("label");
                label.for = "slot" + (i + 1);
                label.textContent = "slot de materia " + (i + 1) + ":";
                label.id = "label" + (i + 1);
                form.appendChild(label);

                var input = document.createElement("input");
                input.type = "text";
                input.name = "slot" + (i + 1); // Setting unique name for each input
                input.id = "slot" + (i + 1);
                input.value = {datos["slot" + (i + 1)]};
                form.appendChild(input);

                var espacio = document.createElement("br")
                espacio.id = "spc" + (i + 1);
                form.appendChild(espacio); // Line break for spacing
            }

            // Add submit button
            var submitButton = document.createElement("input");
            submitButton.type = "submit";
            submitButton.value = "Enviar";
            submitButton.id = "env";
            form.appendChild(submitButton);
        }
    </script>
</body>

</html>